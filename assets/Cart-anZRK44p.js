import{r as a,C as u,k as j,j as e,L as f}from"./index-BOxletb_.js";import g from"./Loading-CA4Zo3kh.js";import{A as y}from"./index--9HMowJV.js";import{m as b}from"./proxy-DpY5CSvb.js";function C(){const{cart:s,isLoading:i,getCart:d,updateQuantity:x,deleteProduct:m}=a.useContext(u),[h,l]=a.useState([]);a.useEffect(()=>{d(),localStorage.getItem("userToken")||j.error("You must log in first cart")},[s]),a.useEffect(()=>{var t;(t=s==null?void 0:s.data)!=null&&t.products&&l(s.data.products)},[s]);const o=(t,r)=>{l(c=>c.map(n=>n.product.id===t?{...n,count:r}:n)),x(t,r)},p=async t=>{l(r=>r.filter(c=>c.product.id!==t)),await m(t)};return e.jsx(e.Fragment,{children:i?e.jsx(g,{}):localStorage.getItem("userToken")?e.jsx("div",{className:"relative overflow-x-auto rounded-2xl my-16",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-[#1a1a1a]",children:[e.jsx("thead",{className:"text-xs text-white uppercase bg-[#1a1a1a]",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-16 py-3",children:e.jsx("span",{className:"sr-only",children:"Image"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),e.jsx("th",{scope:"col",className:"hidden md:table-cell px-6 py-3",children:"Qty"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{children:e.jsx(y,{children:h.map(t=>e.jsxs(b.tr,{exit:{opacity:0,x:-100},className:"bg-[#b3b3b3] md:border-b cursor-pointer border-[#1a1a1a] hover:bg-[#8c8c8c] duration-300",children:[e.jsx("td",{className:"p-4",children:e.jsx("img",{src:t.product.imageCover,className:"w-16 md:w-32 max-w-full max-h-full",alt:t.product.title})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:t.product.title}),e.jsx("td",{className:"hidden md:table-cell px-3 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>t.count>1&&o(t.product.id,t.count-1),className:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full",children:[e.jsx("span",{className:"sr-only",children:"Decrease quantity"}),e.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 18 2",fill:"none",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M1 1h16"})})]}),e.jsx("span",{className:"bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg px-5",children:t.count}),e.jsxs("button",{onClick:()=>o(t.product.id,t.count+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100",children:[e.jsx("span",{className:"sr-only",children:"Increase quantity"}),e.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 18 18",fill:"none",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M9 1v16M1 9h16"})})]})]})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:t.price}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{onClick:()=>p(t.product.id),className:"cursor-pointer font-medium text-red-600 hover:underline",children:"Remove"})})]},t.product.id))})})]})}):e.jsxs("h2",{className:"text-center h-full",children:["The cart is still empty"," ",e.jsx(f,{to:"/products",className:"underline text-main text-lg",children:"add products"})]})})}export{C as default};
