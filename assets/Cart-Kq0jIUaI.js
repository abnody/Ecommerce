import{r as n,C as b,u as j,k as y,j as e,L as f,R as N}from"./index-BC252qpG.js";import w from"./Loading-Cb25M5nb.js";import{A as v}from"./index-DD7n4Er1.js";import{m}from"./proxy-CUiqzhWY.js";function M(){const{cart:s,isLoading:h,getCart:u,updateQuantity:a,deleteProduct:p}=n.useContext(b),[d,l]=n.useState([]),o=j();n.useEffect(()=>{u(),localStorage.getItem("userToken")||y.error("You must log in first cart")},[s]),n.useEffect(()=>{var t;(t=s==null?void 0:s.data)!=null&&t.products&&d.length==0&&l(s.data.products)},[s]);const x=(t,r)=>{l(i=>i.map(c=>c.product.id===t?{...c,count:r}:c)),a(t,r)},g=async t=>{l(r=>r.filter(i=>i.product.id!==t)),await p(t)};return e.jsx(e.Fragment,{children:h?e.jsx(w,{}):localStorage.getItem("userToken")?e.jsxs("div",{className:"relative overflow-x-auto rounded-2xl my-16",children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-[#1a1a1a] border-none",children:[e.jsx("thead",{className:"text-xs text-white uppercase bg-[#1a1a1a] border-none",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-16 py-3",children:e.jsx("span",{className:"sr-only",children:"Image"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),e.jsx("th",{scope:"col",className:"hidden md:table-cell px-6 py-3",children:"Qty"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"})]})}),e.jsx("tbody",{className:"border-none",children:e.jsx(v,{children:d.map(t=>e.jsxs(N.Fragment,{children:[e.jsxs(m.tr,{exit:{opacity:0,x:-100},className:"bg-[#b3b3b3] md:border-b cursor-pointer border-[#1a1a1a] hover:bg-[#8c8c8c] duration-300",children:[e.jsx("td",{className:"p-4",onClick:()=>o(`/productdetails/${t.product.id}`),children:e.jsx("img",{src:t.product.imageCover,className:"w-16 md:w-32 max-w-full max-h-full",alt:t.product.title})}),e.jsx("td",{onClick:()=>o(`/productdetails/${t.product.id}`),className:"px-3 md:px-6 py-4 font-semibold text-gray-900",children:t.product.title}),e.jsx("td",{className:"hidden md:table-cell px-3 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("button",{onClick:()=>t.count>1&&x(t.product.id,t.count-1),className:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full",children:[e.jsx("span",{className:"sr-only",children:"Decrease quantity"}),e.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 18 2",fill:"none",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M1 1h16"})})]}),e.jsx("span",{className:"bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg px-5",children:t.count}),e.jsxs("button",{onClick:()=>x(t.product.id,t.count+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100",children:[e.jsx("span",{className:"sr-only",children:"Increase quantity"}),e.jsx("svg",{className:"w-3 h-3",viewBox:"0 0 18 18",fill:"none",children:e.jsx("path",{stroke:"currentColor",strokeWidth:"2",d:"M9 1v16M1 9h16"})})]})]})}),e.jsx("td",{className:"px-3 md:px-6 py-4 font-semibold text-gray-900",children:t.price}),e.jsx("td",{className:"px-3 md:px-6 py-4",children:e.jsx("div",{onClick:()=>g(t.product.id),className:"cursor-pointer font-medium text-red-600 hover:underline",children:"Remove"})})]}),e.jsx(m.tr,{className:"border-none",exit:{opacity:0,x:-100},children:e.jsx("td",{colSpan:4,className:"md:hidden border-none",children:e.jsxs("div",{className:"flex items-center py-2 justify-center bg-[#b3b3b3] border-none cursor-pointer hover:bg-[#8c8c8c] duration-300 ",children:[e.jsxs("button",{onClick:()=>a(`${t.product.id}`,t.count-1),className:"inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full ",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 2",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M1 1h16"})})]}),e.jsx("div",{children:e.jsx("span",{type:"number",id:"first_product",className:"bg-gray-50 w-14 border- border-gray-300 text-gray-900 text-sm rounded-lg px-5",children:t.count})}),e.jsxs("button",{onClick:()=>a(`${t.product.id}`,t.count+1),className:"inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full  hover:bg-gray-100 ",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Quantity button"}),e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 1v16M1 9h16"})})]})]})})})]},t.product.id))})})]}),e.jsxs("div",{className:"flex justify-between py-3  border-b   border-[#1a1a1a] bg-[#8c8c8c] duration-300 ",children:[e.jsxs("h3",{className:"text-2xl px-3",children:["Total Cart Price: ",e.jsx("span",{className:"text-green-700",children:s==null?void 0:s.data.totalCartPrice})]}),e.jsx("button",{onClick:()=>o("/checkout"),className:"text-white mx-3 bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-5 py-2.5",children:"CheckOut"})]})]}):e.jsxs("h2",{className:"text-center h-full",children:["The cart is still empty"," ",e.jsx(f,{to:"/products",className:"underline text-main text-lg",children:"add products"})]})})}export{M as default};
