import{r as o,l as c,j as e,N as x,a as g}from"./index-BOxletb_.js";import{c as h,a as n,u as b}from"./index.esm-5X8c4acB.js";function v(){const[t,i]=o.useState(null),[l,s]=o.useState(!1);let d=c();async function m(){s(!0);try{let{data:a}=await g.post("https://ecommerce.routemisr.com/api/v1/auth/signin",r.values);s(!1),localStorage.setItem("userToken",a.token),d("/")}catch(a){i(a.response.data.message),s(!1)}}const u=h({email:n().required("email is required").email("Invalid email"),password:n().required("This field is required")}),r=b({initialValues:{email:"",password:""},validationSchema:u,onSubmit:m});return e.jsx(e.Fragment,{children:e.jsxs("form",{className:"max-w-sm mx-auto py-7",onSubmit:r.handleSubmit,children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-white",children:"Your email"}),e.jsx("input",{type:"email",id:"email",value:r.values.email,onChange:r.handleChange,onBlur:r.handleBlur,className:"shadow-xs bg-green-50 border border-green-300 text-green-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",required:!0})]}),r.touched.email&&r.errors.email?e.jsx("div",{className:"p-4 mb-5 -mt-3 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert",children:r.errors.email}):null,e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-white",children:"Your password"}),e.jsx("input",{type:"password",id:"password",value:r.values.password,onChange:r.handleChange,onBlur:r.handleBlur,className:"shadow-xs bg-green-50 border border-green-300 text-green-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",required:!0})]}),r.touched.password&&r.errors.password?e.jsx("div",{className:"p-4 mb-5 -mt-3 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert",children:r.errors.password}):null,e.jsxs("div",{className:"flex items-center",children:[!l&&e.jsx("button",{type:"submit",className:"text-white bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:"Login"}),l&&e.jsx("button",{type:"button",className:"text-white bg-green-700 hover:bg-green-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center ",children:e.jsx("i",{className:"fas fa-spinner fa-spin fa-lg"})}),t&&e.jsxs("p",{className:"text-red-600 ps-3",children:[" ",t," "]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(x,{to:"/register",className:"underline text-gray-400   hover:text-lg duration-150",children:" I don't have account"})})]})})}export{v as default};
