import{r as p,l as f,j as e,a as j}from"./index-BaUYzt0Z.js";import y from"./Loading-BHGSigqC.js";import{A as b}from"./index-CWyy52Cn.js";import{m as N}from"./proxy-DN7HzahG.js";class o extends Error{}o.prototype.name="InvalidTokenError";function w(r){return decodeURIComponent(atob(r).replace(/(.)/g,(s,a)=>{let c=a.charCodeAt(0).toString(16).toUpperCase();return c.length<2&&(c="0"+c),"%"+c}))}function v(r){let s=r.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return w(s)}catch{return atob(s)}}function k(r,s){if(typeof r!="string")throw new o("Invalid token specified: must be a string");s||(s={});const a=s.header===!0?0:1,c=r.split(".")[a];if(typeof c!="string")throw new o(`Invalid token specified: missing part #${a+1}`);let d;try{d=v(c)}catch(n){throw new o(`Invalid token specified: invalid base64 for part #${a+1} (${n.message})`)}try{return JSON.parse(d)}catch(n){throw new o(`Invalid token specified: invalid json for part #${a+1} (${n.message})`)}}function C(){const[r,s]=p.useState(!0),[a,c]=p.useState({}),[d,n]=p.useState([]),x=k(localStorage.getItem("userToken")),h=f();async function m(){let{data:t}=await j.get(`https://ecommerce.routemisr.com/api/v1/orders/user/${x.id}`);n(t),s(!1)}p.useEffect(()=>{m()},[]);function g(t){c(l=>({...l,[t]:!l[t]}))}return e.jsx(e.Fragment,{children:r?e.jsx(y,{}):e.jsx(e.Fragment,{children:d.map((t,l)=>e.jsxs("div",{className:"relative overflow-x-auto rounded-2xl my-7 scrollbar-hide",children:[e.jsxs("div",{className:"flex flex-wrap lg:justify-between px-5 py-6 items-center bg-[#1a1a1a] text-white mb-2",children:[e.jsx("i",{onClick:()=>g(l),className:`fa-solid ${a[l]?"fa-chevron-up":"fa-chevron-down"} fa-xl mx-2 px-3 py-5 rounded-lg cursor-pointer bg-gray-400 text-[#1a1a1a]`}),e.jsxs("p",{className:"px-2",children:["Details: ",e.jsxs("span",{className:"text-gray-400",children:[t.shippingAddress.details," / ",t.shippingAddress.phone]})]}),e.jsxs("p",{className:"px-2",children:["Date: ",e.jsx("span",{className:"text-gray-400",children:t.updatedAt.split("T",1)})]}),e.jsxs("p",{className:"px-2",children:["Total Price: ",e.jsx("span",{className:"text-gray-400",children:t.totalOrderPrice})]}),e.jsx("p",{className:"px-2",children:t.paymentMethodType}),e.jsx("p",{className:"px-2",children:t.isDelivered?"Delivered":"On Delivering"})]}),e.jsx(b,{children:a[l]&&e.jsx(N.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden ",children:e.jsxs("table",{className:"w-full text-sm text-left rounded-2xl rtl:text-right text-[#1a1a1a]",children:[e.jsx("thead",{className:"text-xs text-white uppercase bg-[#1a1a1a]",children:e.jsxs("tr",{className:"text-gray-700",children:[e.jsx("th",{scope:"col",className:"px-16 py-3",children:e.jsx("span",{className:"sr-only",children:"Image"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Qty"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"})]})}),e.jsx("tbody",{children:t.cartItems.map((i,u)=>e.jsxs("tr",{onClick:()=>h(`/productdetails/${i.product._id}`),className:"bg-[#b3b3b3] border-b cursor-pointer border-[#1a1a1a] hover:bg-[#8c8c8c] duration-300",children:[e.jsx("td",{className:"p-4",children:e.jsx("img",{src:i.product.imageCover,className:"w-16 md:w-32 max-w-full max-h-full",alt:i.product.title})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:i.product.title}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg px-5",children:i.count})})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:i.price})]},u))})]})})})]},l))})})}export{C as default};
